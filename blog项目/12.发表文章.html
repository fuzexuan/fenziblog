<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <div class="lesson-content lesson-content-text ps-container" id="lesson-text-content" data-role="lesson-content" style="display: block;">
              <div class="lesson-content-text-body"><h1><a href="#发表文章路由" name="发表文章路由" id="发表文章路由" class="anchor"></a>发表文章路由</h1>
    <p>发表文章表单的form中<code>action="/articles/add"</code>,所以我们要实现发表文章路由 修改 <code>routes/article.js</code> 中的 <code>post('/add')</code></p>
    <pre><code>router.post('/add', function (req, res) {
        req.body.user = req.session.user._id;
        new Model('Article')(req.body).save(function(err,article){
            if(err){
                return res.redirect('/articles/add');
            }
            res.redirect('/');//发表文章成功后返回主页
        });

    });
    </code></pre></div>
            <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: 3px; width: 980px; display: none;"><div class="ps-scrollbar-x" style="left: 0px; width: 0px;"></div></div><div class="ps-scrollbar-y-rail" style="top: 0px; right: 3px; height: 325px; display: inherit;"><div class="ps-scrollbar-y" style="top: 0px; height: 295px;"></div></div></div>    
  </body>
</html>
